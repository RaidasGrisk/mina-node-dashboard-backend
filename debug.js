const data = [
    {
        "prover": "B62qrQiw9JhUumq457sMxicgQ94Z1WD9JChzJu19kBE8Szb5T8tcUAC",
        "blockheight": 217447
    },
    {
        "prover": "B62qnvzUAvwnAiK3eMVQooshDA5AmEF9jKRrUTt5cwbCvVFiF47vdqp",
        "blockheight": 217447
    },
    {
        "prover": "B62qr288BE2HoG95Eiw9dzDTizZRGtH5tggMWxHvSV2K91U8wJ8QS4x",
        "blockheight": 217447
    },
    {
        "prover": "B62qoA8zWuP3qK1ibaeCcETtvG2R79tv2Ea71Djc2fHrCJpw2pSQSJh",
        "blockheight": 217447
    },
    {
        "prover": "B62qn2Ne2JGRdbHXdfD8wkA6PTWuBjaxUDQ6QuPAmggrcYjTP3HwWkF",
        "blockheight": 217447
    },
    {
        "prover": "B62qnM71LjMchDsRgWinBXyNrXR8smf9NXoJZnQrTXe74DrEQoaUStb",
        "blockheight": 217447
    },
    {
        "prover": "B62qopzjbycAJDzvhc1tEuYSmJYfRQQbfS9nvkKtUzBS1fmLCyTz4dJ",
        "blockheight": 217447
    },
    {
        "prover": "B62qoHXLV7QT6ezrPai2fLiS2k7eA4dDecW6hkDjXeuKdgjsTDATdNi",
        "blockheight": 217447
    },
    {
        "prover": "B62qs2Lw5WZNSjd8eHBUZXFYyRjV8oKtrZMFDn1S1Ye62G71xCQJMYM",
        "blockheight": 217447
    },
    {
        "prover": "B62qkwrHj3YCKgQsXRktpwhVFij19RiwYDgMmiwp7iggNBi8712a4W4",
        "blockheight": 217447
    },
    {
        "prover": "B62qpcENWiR5VKkrHscV9cWfPwNs56ExFeb94FDiVz9GeV2mBNpMCkY",
        "blockheight": 217447
    },
    {
        "prover": "B62qqWzWHjUmJSSB9db6BDpGjFJkRNjjtZorwJdpeASzSPHpRe4CoJS",
        "blockheight": 217447
    },
    {
        "prover": "B62qkBqSkXgkirtU3n8HJ9YgwHh3vUD6kGJ5ZRkQYGNPeL5xYL2tL1L",
        "blockheight": 217500
    },
    {
        "prover": "B62qoiEyq2QHR8m3sw9eLdJxZzA5ttZ8C4EYfRs8uyE4Gc7Bi5rY1iA",
        "blockheight": 217536
    },
    {
        "prover": "B62qneAGjR5kuqCMqumJ3xXbJ2YkkVowmLyUCHfXaDnsmeXhCbwLjnZ",
        "blockheight": 217536
    },
    {
        "prover": "B62qpsyB3gCndt8sNz4GRwusBtg9U72TNiL4mxmcQfWKZ5noa9fFnWr",
        "blockheight": 217645
    },
    {
        "prover": "B62qpgsBxnNsiEPAArCNV97SMaFa8C8iEUXzcia2wLfy39j94N4jez2",
        "blockheight": 217918
    },
    {
        "prover": "B62qjE7tc4GfnxT8y7xdexpgmX6CYcRwPLUjgi6K7HpWTMRA2CBuLeH",
        "blockheight": 218483
    },
    {
        "prover": "B62qorW1PNTMXN82qWXMuwBXG4urCKUnWz9izshzyUzS37shodz5iTE",
        "blockheight": 218485
    },
    {
        "prover": "B62qrQ4m3KNeNBsC86AW1vyXxEs32NbG2pDA2mdvCq5erxLqftVyZTj",
        "blockheight": 218485
    },
    {
        "prover": "B62qnrr3cKh7uDPNFxAsnJR6BGk2ufsG1KeY5cVyKuiHnPjaZ9uEpef",
        "blockheight": 218485
    },
    {
        "prover": "B62qqJytzQQ9B3KyfKTewRm34EmtGN4MXJb6WqYNGs7F76obVqqhhRg",
        "blockheight": 218485
    },
    {
        "prover": "B62qiVQduMR4ZNaCiVGmeRnHn1V9Ju5CGsS4Rg9HvvADcRYch2Zy2y7",
        "blockheight": 218485
    },
    {
        "prover": "B62qrB4hLHkwUz3UXwx6jLx6XrvbRae4d8t6pMVaGhjt2c1XoqJZTUb",
        "blockheight": 218485
    },
    {
        "prover": "B62qkwA93R26BV8U52PJtuxdQTo3QE5SzEAn4JtPxbb5sLjHw6ayUKm",
        "blockheight": 218485
    },
    {
        "prover": "B62qp5dXkkj3TkkfPos35rNYxVTKTbm5CqigfgKppA5E7GQHK7H3nNd",
        "blockheight": 218487
    },
    {
        "prover": "B62qqDDZYhfU7mNcQKJfWHDJ3JjVTi6dG32oWiWY3KrrX4mSMLdEuUj",
        "blockheight": 218487
    },
    {
        "prover": "B62qp9bXA4c7nTrnL8AGxW1zqBnKr7dtmPZvhDN69kc4PFT458fP71a",
        "blockheight": 218489
    },
    {
        "prover": "B62qn3aPKv9vuoU1oJdT785bYLbbU1TTrNAXyEfycA17Kx7Miao4whM",
        "blockheight": 218489
    },
    {
        "prover": "B62qqRykfCVZQB8JY5MiB6umLVf2D5tEsPE5wBnkZ6b4iurZDHFXZge",
        "blockheight": 218489
    },
    {
        "prover": "B62qqheA3p57XhNRYaKuEyhp6yNCAj3byDPuNPfFQiNkGgTX4e6iwqp",
        "blockheight": 218489
    },
    {
        "prover": "B62qptf4MGw8h6tJyd7b1Bbqysfk3UVyRBEukCZEHuNSJEretDBDWYs",
        "blockheight": 218492
    },
    {
        "prover": "B62qmybys2vViMnedZSheEZ6ZSBjNwXHr9uBDy8kMUEJx8UsJ53r11D",
        "blockheight": 218493
    },
    {
        "prover": "B62qkiX6DZ5FvN9TFx61Pj5WdXvnEhXLYiAronpzqkSvkvX4TCTWmLM",
        "blockheight": 218493
    },
    {
        "prover": "B62qnEeb4KAp9WxdMxddHVtJ8gwfyJURG5BZZ6e4LsRjQKHNWqmgSWt",
        "blockheight": 218498
    },
    {
        "prover": "B62qrHzjcZbYSsrcXVgGko7go1DzSEBfdQGPon5X4LEGExtNJZA4ECj",
        "blockheight": 218528
    },
    {
        "prover": "B62qjWchpjVwmbEazciy3VSBZhJNVF28RcDQirLFpH2rvfmDrtXL382",
        "blockheight": 218557
    },
    {
        "prover": "B62qpPTpZctjucRjWmVEiiAMjKuJ7qJwZu5imNUZ43cVhNiQP85Nwjq",
        "blockheight": 219393
    },
    {
        "prover": "B62qmcgsR9yHkjDHpbsky1fuF3Zvf7q2MAooaJW3xoLyaLJPQBtGfjY",
        "blockheight": 219395
    },
    {
        "prover": "B62qq3UBX4PbGnqmCwPwfj8MeLziWfXneMLb8gzANvnYJH1wLVLgSLD",
        "blockheight": 219402
    },
    {
        "prover": "B62qpd4wgudYHuGUiSAaWCRxRh4yKNQ75ujGESX7CYHqTEUMnTKGR6w",
        "blockheight": 219412
    },
    {
        "prover": "B62qjqYBrf5erL4LHSapiuvcX9TMLCVqCuyzYYGC2sGZfKxt8tQ67Vz",
        "blockheight": 219473
    }
]

console.log(data.length)

// refactor the data so that we've got the following:
// { blockheight: int, snark_workers: int }
// also fill missing blocks so that the data is proper timeseries

// first lets create an array starting from oldest block
// and ending at newest, incrementing by 1
const unique_blocks = new Set(data.map(item => item.blockheight))
const start = Math.min(...unique_blocks)
const stop = Math.max(...unique_blocks)
const step = 1
const range = (start, stop, step) => {
  return Array.from({
    length: (stop - start) / step + 1
  }, (_, i) => start + (i * step))
}
blocks = range(start, stop, step)

// lets add the accumulated number of scnarks to each block
const snark_counts = []
let accum = 0
blocks.forEach(block => {
  accum += data.filter(item => item.blockheight == block).length
  snark_counts.push({
    blockheight: block,
    snark_workers: accum
  })
})


console.log(snark_counts)
